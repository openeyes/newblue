// ** Copyright (C) 2020, OpenEyes Foundation. This file is part of OpenEyes.
// ** OpenEyes is free software; and is distributed, WITHOUT ANY WARRANTY under the terms of AGPL 3.0 licence.

.element {
	// diagnosis element specific layout
	// could be for ophthalmic or systemic

	// table.diagnoses table hook if it should be needed

	table.diagnoses {
		td {
			height: auto;
			padding: 4px 0 4px 4px;

			&:first-child {
				padding-left: 1px; // match the default for all other TDs
			}
		}
	}

	// <td> 1st column - diag (name and lat)
	// <td> 2nd column - diagnosis-mgmt (wrapper)
	// <td> 3rd column - actions

	.diag,
	.diag-lat {
		@include flex(center, space-between);
		gap: 5px;
	}

	.diag-user {
		padding: 0 0 0 10px;
	}

	// trash, remove, view changes (at the end)
	.diag-actions {
		@include flex(center, flex-end);
		flex-wrap: nowrap; // push <td>
		width:80px;
	}

	// wrapper for all the various diagnosis states
	.diag-mgmt {
		@include flex(flex-start, space-between);
		gap: 4px;

		.oe-date,
		.oe-i {
			height: 24px; // icons to match all inputs
			align-items: center;
		}

		&.sides {
			.right,
			.left {
				flex: 1 1 0;
				@include flex(flex-start, space-between);
			}

			.right {
				// match the line-l on the table
				border-right: 2px solid $oe-line;
			}

			.left {
				// right side has cleared indent because of "td.line-l"
				// this balances that visual indent for the left side
				padding:0 0 0 2px;
			}
		}


		// minor DOM updates to adjust UIX:
		// diag-state, state-change, state-notes (v1)
		// in updated DOM these are: diag-status & status-notes
		// keeping to show the old layout in iDG (only a few lines)
		.diag-status {
			flex: 1 1 0;
			display: grid;
			grid: 24px 1fr / 1fr 1fr 28px;

			margin:0 5px 0 0;

			.status-notes {
				grid-column: auto / span 3;
				padding:5px 0;
				input {
					width: 100%;
					&:invalid {
						border: 1px solid $oe-alert-red;
					}
				}
			}
		}

		.diag-edit {
			@include flex(center, space-between);
			flex-wrap: nowrap;
		}

		.diag-state,
		.state-change,
		.review {
			@include flex(center, space-between);
		}

		.diag-state {
			flex: 1 1 0;
		}

		.state-notes {
			@include flex(center, space-between);
			flex-wrap: wrap;
			padding: 0 0 0 10px;

			// Suspected, Present, Not Present
			.state {
				margin: 3px 8px 3px 1px;
			}

			button {
				padding: 0 2px;
			}

		}

		.state-change {
			gap: 5px;
		}

		.state-review {
			gap: 10px;
		}

		// new class for updates
		.diag-review {
			flex:1 1 0;
			min-height: 24px; // match inputs
			@include flex(center, flex-start);
			font-weight: 500;
			gap:10px;
			padding: 0 0 0 8px;

			select {
				flex: 1 1 0;
			}

			.by-who {
				flex: 2;
			}
		}

		// Resolved or Removed (replaced by diag-review)
		.diag-record {
			.by-who {
				display:inline-block;
				margin:0 0 0 5px;
				small {
					opacity: 0.5;
				}
			}
		}

		.diag-date {
			@include flex(center, center);
			width: 100px;
			margin:0 5px 0 0;
			input[type=date] {
				width:100%;
			}
		}
	}
}